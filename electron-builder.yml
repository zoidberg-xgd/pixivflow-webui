appId: com.pixivflow.webui
productName: PixivFlow
copyright: Copyright © 2024

publish: null

# 加速构建
electronDownload:
  cache: ~/.electron-cache

directories:
  buildResources: build
  output: release

files:
  - "package.json"
  - "electron/**/*"
  - "dist/**/*"
  - "!electron/**/*.{ts,map}"
  - "!dist/**/*.map"

asar: true

afterPack: build/install-backend-deps.cjs

extraResources:
  - from: ../PixivFlow/dist
    to: backend/dist
    filter:
      - "**/*"
      - "!**/*.map"
  - from: ../PixivFlow/package.json
    to: backend/package.json
  - from: ../PixivFlow/config
    to: backend/config
  - from: ../PixivFlow/data
    to: backend/data

mac:
  target:
    - target: dir  # 只生成目录，不打包 DMG（最快）
      arch:
        - arm64
  icon: build/icon.icns
  category: public.app-category.utilities
  hardenedRuntime: false
  gatekeeperAssess: false
  artifactName: "${productName}-${version}-${arch}.${ext}"
